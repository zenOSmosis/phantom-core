<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>phantom-core</title><meta name="description" content="Documentation for phantom-core"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">phantom-core</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>phantom-core </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography"><p><a href="https://raw.githubusercontent.com/zenOSmosis/phantom-core/main/LICENSE"><img src="https://img.shields.io/github/license/zenosmosis/phantom-core" alt="MIT License"></a>
<a href="https://github.com/zenOSmosis/phantom-core/blob/main/package.json#L3"><img src="https://img.shields.io/github/package-json/v/zenosmosis/phantom-core" alt="version"></a>
<a href="https://github.com/zenOSmosis/phantom-core/actions/workflows/ci.yml"><img src="https://github.com/zenosmosis/phantom-core/actions/workflows/ci.yml/badge.svg" alt="ci"></a>
<a href="https://github.com/zenOSmosis/phantom-core/actions/workflows/codeql-analysis.yml"><img src="https://github.com/zenosmosis/phantom-core/workflows/CodeQL/badge.svg" alt="CodeQL"></a>
<a href="https://snyk.io/test/github/zenosmosis/phantom-core"><img src="https://snyk.io/test/github/zenosmosis/phantom-core/badge.svg" alt="Known Vulnerabilities"></a>
<a href="https://www.codefactor.io/repository/github/zenOSmosis/phantom-core"><img src="https://www.codefactor.io/repository/github/zenOSmosis/phantom-core/badge" alt="CodeFactor"></a>
<a href="https://github.com/zenosmosis/phantom-core"><img src="https://img.shields.io/badge/architecture-phantom--core-red" alt="phantom-core-architecture"></a>
<a href="https://prettier.io/"><img src="https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=flat" alt="Style Status"></a>
<a href="https://www.typescriptlang.org/"><img src="https://shields.io/badge/TypeScript-3178C6?logo=TypeScript&logoColor=FFF&style=flat" alt="TypeScript"></a></p>

<a href="#phantomcore" id="phantomcore" style="color: inherit; text-decoration: none;">
  <h1>PhantomCore</h1>
</a>
<img src="phantom.svg" alt="Phantom" width="200"/>

<p><strong>This is a work in progress, subject to many API updates and feature regressions in a short amount of time, as it is used for development and prototyping of several applications at once.</strong></p>
<p>PhantomCore is an EventEmitter-based, object-oriented application architecture for browsers and Node.js, featuring lifecycle management, exported common event constants, and some basic utilities which build on top of these principles which form some basic building blocks.</p>
<p>Within the context of another application, it can be integrated as lightly as only having a single class using PhantomCore, or the entire application being built on top of PhantomCore.</p>
<p>It is the common base package utilized in <a href="https://speaker.app">Speaker App</a> / <a href="https://reshell.org">ReShell</a> which most other classes derive from, independent of their React view layers.</p>

<a href="#characteristics" id="characteristics" style="color: inherit; text-decoration: none;">
  <h2>Characteristics</h2>
</a>
<ul>
<li>Can be run in Node.js and in browser (as a base for extension classes to build upon)</li>
<li>EventEmitter based core with exported event constants (i.e. EVT_UPDATED, EVT_DESTROYED)</li>
<li>Logger, inspired by <a href="https://www.npmjs.com/package/loglevel">loglevel</a>, with log level support, and exposes original stack trace to console (node and browser)</li>
<li>Not a singleton on its own (can be extended w/ singleton support)</li>
<li>Destruct method: Unbinds event listeners and nullifies internal method calls</li>
<li>Event proxies: Events (i.e. on / once) can be mapped to other PhantomCore instances and are automatically unbound once the proxying host is destructed</li>
<li>Instance lookup by UUID / Symbol: If the UUID or Symbol is known for a given PhantomCore instance, that instance can be returned by the lookup function (i.e. PhantomCore.getInstanceWithUUID() or PhantomCore.getInstanceWithSymbol() static methods)</li>
<li>Slightly opinionated deep object merging (based on <a href="https://www.npmjs.com/package/deepmerge">deepmerge</a>)</li>
<li>PhantomCollection:<ul>
<li>Maintains a collection of arbitrary PhantomCore (and derived) instances</li>
<li>Can broadcast events to all of its children</li>
<li>Can re-emit events sent from one child out the collection itself (via included ChildEventBridge object)</li>
<li>Can add and remove child instances during runtime (i.e. &quot;group size varies&quot;)</li>
<li>Can contain children bound to other PhantomCollections (share children across collections)</li>
<li>Can contain other collections as children (linked collections)</li>
<li>Accepts an optional key when adding a child to make it easier to extend with coerced types; the relevant child can be looked up by this key</li>
<li>Can optionally destruct all associated children</li>
</ul>
</li>
<li>PhantomState / PhantomSerializableState: Simple, object-based state stores with a shallow-merging update strategy</li>
<li>PhantomServiceCore / PhantomServiceManager:<ul>
<li>Wraps PhantomState and PhantomCollection with the ability to instantiate and manage services</li>
<li>PhantomServiceCore instances act as singletons within a PhantomServiceManager context, instead of a global context</li>
<li>Currently being prototyped for usage with <a href="https://reshell.org">ReShell</a> desktop prototype</li>
</ul>
</li>
</ul>

<a href="#additional-information" id="additional-information" style="color: inherit; text-decoration: none;">
  <h2>Additional Information</h2>
</a>
<p>Any reasonable attempt to try to explain this thing will surely develop over time, and such conclusions theoretically will eventually work their way back into the README.</p>
<p>Example API usage and other documentation will follow.</p>
<p>TODO: Include sections for testing [SauceLabs / airtap], development, etc.)</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-reference"><a href="modules.html#default" class="tsd-kind-icon">default</a></li><li class="tsd-kind-enum"><a href="enums/LogLevel.html" class="tsd-kind-icon">Log<wbr/>Level</a></li><li class="tsd-kind-enum"><a href="enums/TimerType.html" class="tsd-kind-icon">Timer<wbr/>Type</a></li><li class="tsd-kind-class"><a href="classes/ArbitraryPhantomWrapper.html" class="tsd-kind-icon">Arbitrary<wbr/>Phantom<wbr/>Wrapper</a></li><li class="tsd-kind-class"><a href="classes/CommonEventEmitter.html" class="tsd-kind-icon">Common<wbr/>Event<wbr/>Emitter</a></li><li class="tsd-kind-class"><a href="classes/EventProxyStack.html" class="tsd-kind-icon">Event<wbr/>Proxy<wbr/>Stack</a></li><li class="tsd-kind-class"><a href="classes/FunctionStack.html" class="tsd-kind-icon">Function<wbr/>Stack</a></li><li class="tsd-kind-class"><a href="classes/Logger.html" class="tsd-kind-icon">Logger</a></li><li class="tsd-kind-class"><a href="classes/PhantomCollection.html" class="tsd-kind-icon">Phantom<wbr/>Collection</a></li><li class="tsd-kind-class"><a href="classes/PhantomCore.html" class="tsd-kind-icon">Phantom<wbr/>Core</a></li><li class="tsd-kind-class"><a href="classes/PhantomSerializableState.html" class="tsd-kind-icon">Phantom<wbr/>Serializable<wbr/>State</a></li><li class="tsd-kind-class"><a href="classes/PhantomServiceCore.html" class="tsd-kind-icon">Phantom<wbr/>Service<wbr/>Core</a></li><li class="tsd-kind-class"><a href="classes/PhantomServiceManager.html" class="tsd-kind-icon">Phantom<wbr/>Service<wbr/>Manager</a></li><li class="tsd-kind-class"><a href="classes/PhantomState.html" class="tsd-kind-icon">Phantom<wbr/>State</a></li><li class="tsd-kind-class"><a href="classes/PhantomWatcher.html" class="tsd-kind-icon">Phantom<wbr/>Watcher</a></li><li class="tsd-kind-class"><a href="classes/TimerStack.html" class="tsd-kind-icon">Timer<wbr/>Stack</a></li><li class="tsd-kind-type-alias"><a href="modules.html#CommonOptions" class="tsd-kind-icon">Common<wbr/>Options</a></li><li class="tsd-kind-event"><a href="modules.html#EVT_BEFORE_DESTROY" class="tsd-kind-icon">EVT_<wbr/>BEFORE_<wbr/>DESTROY</a></li><li class="tsd-kind-event"><a href="modules.html#EVT_CHILD_INSTANCE_ADD" class="tsd-kind-icon">EVT_<wbr/>CHILD_<wbr/>INSTANCE_<wbr/>ADD</a></li><li class="tsd-kind-event"><a href="modules.html#EVT_CHILD_INSTANCE_REMOVE" class="tsd-kind-icon">EVT_<wbr/>CHILD_<wbr/>INSTANCE_<wbr/>REMOVE</a></li><li class="tsd-kind-event"><a href="modules.html#EVT_DESTROY_STACK_TIME_OUT" class="tsd-kind-icon">EVT_<wbr/>DESTROY_<wbr/>STACK_<wbr/>TIME_<wbr/>OUT</a></li><li class="tsd-kind-event"><a href="modules.html#EVT_LOG_MISS" class="tsd-kind-icon">EVT_<wbr/>LOG_<wbr/>MISS</a></li><li class="tsd-kind-event"><a href="modules.html#EVT_NO_INIT_WARN" class="tsd-kind-icon">EVT_<wbr/>NO_<wbr/>INIT_<wbr/>WARN</a></li><li class="tsd-kind-event"><a href="modules.html#EVT_READY" class="tsd-kind-icon">EVT_<wbr/>READY</a></li><li class="tsd-kind-event"><a href="modules.html#EVT_UPDATE" class="tsd-kind-icon">EVT_<wbr/>UPDATE</a></li><li class="tsd-kind-variable"><a href="modules.html#EVT_DESTROY" class="tsd-kind-icon">EVT_<wbr/>DESTROY</a></li><li class="tsd-kind-variable"><a href="modules.html#EVT_PHANTOM_WATCHER_LOG_MISS" class="tsd-kind-icon">EVT_<wbr/>PHANTOM_<wbr/>WATCHER_<wbr/>LOG_<wbr/>MISS</a></li><li class="tsd-kind-variable"><a href="modules.html#logger" class="tsd-kind-icon">logger</a></li><li class="tsd-kind-variable"><a href="modules.html#performance" class="tsd-kind-icon">performance</a></li><li class="tsd-kind-function"><a href="modules.html#autoBindClassInstanceMethods" class="tsd-kind-icon">auto<wbr/>Bind<wbr/>Class<wbr/>Instance<wbr/>Methods</a></li><li class="tsd-kind-function"><a href="modules.html#checkEvents" class="tsd-kind-icon">check<wbr/>Events</a></li><li class="tsd-kind-function"><a href="modules.html#compareExportedEvents" class="tsd-kind-icon">compare<wbr/>Exported<wbr/>Events</a></li><li class="tsd-kind-function"><a href="modules.html#consume" class="tsd-kind-icon">consume</a></li><li class="tsd-kind-function"><a href="modules.html#deepMerge" class="tsd-kind-icon">deep<wbr/>Merge</a></li><li class="tsd-kind-function"><a href="modules.html#enumToNumericIndexedObject" class="tsd-kind-icon">enum<wbr/>To<wbr/>Numeric<wbr/>Indexed<wbr/>Object</a></li><li class="tsd-kind-function"><a href="modules.html#extractEvents" class="tsd-kind-icon">extract<wbr/>Events</a></li><li class="tsd-kind-function"><a href="modules.html#getClass" class="tsd-kind-icon">get<wbr/>Class</a></li><li class="tsd-kind-function"><a href="modules.html#getClassInheritance" class="tsd-kind-icon">get<wbr/>Class<wbr/>Inheritance</a></li><li class="tsd-kind-function"><a href="modules.html#getClassInstanceMethodNames" class="tsd-kind-icon">get<wbr/>Class<wbr/>Instance<wbr/>Method<wbr/>Names</a></li><li class="tsd-kind-function"><a href="modules.html#getClassInstancePropertyNames" class="tsd-kind-icon">get<wbr/>Class<wbr/>Instance<wbr/>Property<wbr/>Names</a></li><li class="tsd-kind-function"><a href="modules.html#getClassName" class="tsd-kind-icon">get<wbr/>Class<wbr/>Name</a></li><li class="tsd-kind-function"><a href="modules.html#getIsClass" class="tsd-kind-icon">get<wbr/>Is<wbr/>Class</a></li><li class="tsd-kind-function"><a href="modules.html#getIsClassInstance" class="tsd-kind-icon">get<wbr/>Is<wbr/>Class<wbr/>Instance</a></li><li class="tsd-kind-function"><a href="modules.html#getIsNodeJS" class="tsd-kind-icon">get<wbr/>Is<wbr/>NodeJS</a></li><li class="tsd-kind-function"><a href="modules.html#getIsNumeric" class="tsd-kind-icon">get<wbr/>Is<wbr/>Numeric</a></li><li class="tsd-kind-function"><a href="modules.html#getPackageJSON" class="tsd-kind-icon">get<wbr/>PackageJSON</a></li><li class="tsd-kind-function"><a href="modules.html#getSuperClass" class="tsd-kind-icon">get<wbr/>Super<wbr/>Class</a></li><li class="tsd-kind-function"><a href="modules.html#getUnixTime" class="tsd-kind-icon">get<wbr/>Unix<wbr/>Time</a></li><li class="tsd-kind-function"><a href="modules.html#getUptime" class="tsd-kind-icon">get<wbr/>Uptime</a></li><li class="tsd-kind-function"><a href="modules.html#shallowMerge" class="tsd-kind-icon">shallow<wbr/>Merge</a></li><li class="tsd-kind-function"><a href="modules.html#sleep" class="tsd-kind-icon">sleep</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li><li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>